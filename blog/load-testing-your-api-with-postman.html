<!doctype html> <html lang="en" class="no-js"> <head> <meta charset="utf-8"> <title>Load Testing Your API with Postman - Mostafa’s personal blog</title> <meta name="description" content="How to load test your API using your existing Postman collections and k6?"> <meta name="author" content="Mostafa Moradian"> <meta property="og:type" content="article"> <meta property="og:locale" content="en_US"> <meta property="og:site_name" content="Mostafa's personal blog"> <meta property="og:title" content="Load Testing Your API with Postman"> <meta property="og:url" content="https://k6.io/blog/load-testing-with-postman-collections"> <meta property="og:description" content="How to load test your API using your existing Postman collections and k6?"> <meta property="og:image" content="https://mostafa.dev/assets/images/load-testing-api-with-postman-cover-image.jpg"> <meta name="twitter:site" content="@mosimoradian"> <meta name="twitter:title" content="Load Testing Your API with Postman"> <meta name="twitter:description" content="How to load test your API using your existing Postman collections and k6?"> <meta name="twitter:url" content="https://k6.io/blog/load-testing-with-postman-collections"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:image" content="https://mostafa.dev/assets/images/load-testing-api-with-postman-cover-image.jpg"> <meta property="article:published_time" content="2020-04-21T00:00:00+02:00"> <meta property="article:modified_time" content="2020-06-05T00:00:00+02:00"> <link rel="canonical" href="https://k6.io/blog/load-testing-with-postman-collections"> <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "https://mostafa.dev/",
      "sameAs": ["https://twitter.com/MosiMoradian","https://instagram.com/mostafa_moradian","https://www.linkedin.com/in/mostafa-moradian","https://www.medium.com/@mostafamoradian","https://www.github.com/mostafa"]
    
  }
</script> <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Mostafa's personal blog Feed"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <script>document.documentElement.className=document.documentElement.className.replace(/\bno-js\b/g,"")+" js ";</script> <link rel="stylesheet" href="/assets/css/main.css"> <!--[if IE]><style>.greedy-nav .site-title{padding-right:3em}.greedy-nav button{position:absolute;top:0;right:0;height:100%}</style><![endif]--> </head> <body class="layout--single"> <nav class="skip-links"> <h2 class="screen-reader-text">Skip links</h2> <ul> <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li> <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li> <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li> </ul> </nav> <!--[if lt IE 9]><div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]--> <div class="masthead"> <div class="masthead__inner-wrap"> <div class="masthead__menu"> <nav id="site-nav" class="greedy-nav"> <a class="site-title" href="/"> Mostafa's personal blog <span class="site-subtitle">Version 0.4.3</span> </a> <ul class="visible-links"><li class="masthead__menu-item"> <a href="/">Home</a> </li><li class="masthead__menu-item"> <a href="/blog/">Blog</a> </li><li class="masthead__menu-item"> <a href="/resume/">Resume</a> </li></ul> <button class="search__toggle" type="button"> <span class="visually-hidden">Toggle search</span> <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16"> <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path> </svg> </button> <button class="greedy-nav__toggle hidden" type="button"> <span class="visually-hidden">Toggle menu</span> <div class="navicon"></div> </button> <ul class="hidden-links hidden"></ul> </nav> </div> </div> </div> <div class="initial-content"> <div class="page__hero" style=" background-image: url('');"> <img src="/assets/images/load-testing-api-with-postman-cover-image.jpg" alt="Load Testing Your API with Postman" class="page__hero-image"> <span class="page__hero-caption">Credits: <a href="https://k6.io/blog/load-testing-with-postman-collections">Load Testing Your API with Postman</a> </span> </div> <div id="main" role="main"> <article class="page" itemscope itemtype="https://schema.org/CreativeWork"> <meta itemprop="headline" content="Load Testing Your API with Postman"> <meta itemprop="description" content="In this article, I’ll explain how to use a Postman collection I have created to load test our instance of our test API. The process is pretty straightforward, as is shown below. You need to feed your exported Postman collection to our postman-to-k6 converter, and use the generated k6 script to load test your own API."> <meta itemprop="datePublished" content="2020-04-21T00:00:00+02:00"> <meta itemprop="dateModified" content="2020-06-05T00:00:00+02:00"> <div class="page__inner-wrap"> <header> <h1 id="page-title" class="page__title" itemprop="headline">Load Testing Your API with Postman </h1> <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 9 minute read </p> </header> <section class="page__content" itemprop="text"> <aside class="sidebar__right "> <nav class="toc"> <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> Table of Contents</h4></header> <ul class="toc__menu"> <li><a href="#our-test-api--its-testing-scenario">Our Test API &amp; Its Testing Scenario</a> <ul> <li><a href="#public-apis">Public APIs</a></li> <li><a href="#registration-and-authentication">Registration and authentication</a></li> <li><a href="#private-apis">Private APIs</a></li> </ul> </li> <li><a href="#our-test-api-postman-collection">Our Test API Postman Collection</a></li> <li><a href="#load-testing-our-test-api-with-the-postman-collection">Load Testing Our Test API with The Postman Collection</a></li> <li><a href="#postman-api-vs-k6-api">Postman API vs. k6 API</a> <ul> <li><a href="#functional-testing-vs-load-testing">Functional testing vs. load testing</a></li> <li><a href="#load-testing-metrics-for-measuring-performance">Load testing metrics for measuring performance</a></li> <li><a href="#passfail-a-test-with-thresholds">Pass/fail a test with thresholds</a></li> <li><a href="#filter-results-with-tags">Filter results with tags</a></li> <li><a href="#load-testing-websocket-servers">Load testing WebSocket servers</a></li> </ul> </li> <li><a href="#conclusion">Conclusion</a></li> </ul> </nav> </aside> <p>In this article, I’ll explain how to use a Postman collection I have created to load test our instance of our test API. The process is pretty straightforward, as is shown below. You need to feed your exported Postman collection to our postman-to-k6 converter, and use the generated k6 script to load test your own API.</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># convert postman collection to k6 test</span>
postman-to-k6 test-api.json <span class="nt">-e</span> env.json <span class="nt">-o</span> k6-script.js

<span class="c"># run load test</span>
k6 run <span class="nt">--vus</span> 100 <span class="nt">--duration</span> 5m k6-script.js
</code></pre></div></div> <h2 id="our-test-api--its-testing-scenario">Our Test API &amp; Its Testing Scenario</h2> <p>In order to demonstrate the power of k6 in different scenarios, we have created our test API with various example endpoints, which is available at <a href="https://test-api.k6.io">test-api.k6.io</a>. These endpoints are available in the Postman collection:</p> <h3 id="public-apis">Public APIs</h3> <ul> <li>List all public crocodiles</li> <li>Get a single public crocodile</li> </ul> <h3 id="registration-and-authentication">Registration and authentication</h3> <ul> <li>Register a new user</li> <li>Bearer/JWT token authentication</li> </ul> <h3 id="private-apis">Private APIs</h3> <ul> <li>List all your crocodiles</li> <li>Get a single crocodile</li> <li>Create a new crocodile (max 100)</li> <li>Update your crocodile</li> <li>Update selected fields on your crocodile</li> <li>Remove your crocodile</li> </ul> <p>The scenario is to test all the public and private APIs. For the private APIs, a user is created and its token is extracted. The extracted token is used to make other API calls. The order is very important in the private APIs, since you cannot delete a non-existing resource, for example. By the way, crocodile is our mascot.</p> <h2 id="our-test-api-postman-collection">Our Test API Postman Collection</h2> <p>To ease testing of our test API and demonstrate the usage of our Postman to k6 converter, I’ve created a Postman collection with almost all of our test API requests. You’ll see how you can access this Postman collection shortly.</p> <p><img src="/assets/images/test-api-postman-collection.jpg" alt="Test API Postman collection"/></p> <p>This collection includes a set of collection variables, environment variables, pre-scripts, tests, authorization with two different mechanisms, and usages of the <a href="https://learning.postman.com/docs/postman/scripts/postman-sandbox-api-reference/">Postman Sandbox API</a>.</p> <h2 id="load-testing-our-test-api-with-the-postman-collection">Load Testing Our Test API with The Postman Collection</h2> <p>We have created a tool that converts your Postman collection to k6 script, which is called <a href="https://github.com/loadimpact/postman-to-k6">postman-to-k6</a>. You can read more about its features in its <a href="https://blog.loadimpact.com/new-postman-to-k6-converter-tool-with-support-for-pre-request-and-test-scripts">release notes</a>.</p> <p>In order to convert your Postman collection to k6 script, you should take the following steps:</p> <p><strong>1. Optional: Clone the repository and skip to the step 5</strong>:</p> <p>I’ve created a repository for this article that contains the exported Postman collection, along with the converted script and related files. You can clone the repository and import the <code class="language-plaintext highlighter-rouge">test-api.json</code> and <code class="language-plaintext highlighter-rouge">env.json</code> files into the Postman application and possibly play with them if you want.</p> <p>This repository contains everything that is needed for load testing our test API, so you can skip to step 4. When using your own collection, you should take all the steps to be able to have a k6 script out of your Postman collection, and to be able to run your load test with it.</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git clone https://github.com/k6io/example-postman-collection.git
</code></pre></div></div> <p><strong>2. Install Node.js (if you haven’t already done so)</strong>:</p> <p>For this, I highly recommend that you use something like <a href="https://github.com/nvm-sh/nvm">nvm</a>, which is a Node.js version manager that you can use to have multiple version of Node.js at the same time on your machine and be able to switch to any of them quickly.</p> <p><strong>3. Install the postman-to-k6 tool</strong>:</p> <p>The <a href="https://github.com/loadimpact/postman-to-k6">postman-to-k6</a> tool is developed to help you convert the requests inside your Postman collections to k6 scripts, which are actually JavaScript code.</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">install</span> <span class="nt">-g</span> postman-to-k6
</code></pre></div></div> <p><strong>4. Convert your exported Postman collection to k6 script</strong>:</p> <p>Assuming your exported collection is named <code class="language-plaintext highlighter-rouge">test-api.json</code>, you can run this command to convert it to a k6 script. The <code class="language-plaintext highlighter-rouge">env.json</code> includes all your environment variables that are exported from Postman.</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>postman-to-k6 test-api.json <span class="nt">-e</span> env.json <span class="nt">-o</span> k6-script.js
</code></pre></div></div> <p>If you need more fine-tuning of your test (like we did above), like adding data or changing environment variables inside your code, just take a look at the Options section of the <a href="https://github.com/loadimpact/postman-to-k6#options">postman-to-k6 README</a>.</p> <p>The script generated by the converter should look like below. As you see, I’ve manually added the <a href="https://k6.io/docs/using-k6/options#duration">duration</a> (of the test run) to be 1 minute and also added the <a href="https://k6.io/docs/using-k6/options#vus">virtual users (VU)</a> count. These two options let the script run for a minute with 100 virtual users. These 100 VUs try to make as many requests as they can to test the server, which you’ll see in the next screenshot.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="dl">"</span><span class="s2">./libs/shim/core.js</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="dl">"</span><span class="s2">./libs/shim/urijs.js</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">URI</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./libs/urijs.js</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span>
  <span class="nx">group</span>
<span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">k6</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">let</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">maxRedirects</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
  <span class="na">duration</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1m</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">vus</span><span class="p">:</span> <span class="mi">100</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">Request</span> <span class="o">=</span> <span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="dl">"</span><span class="s2">request</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">postman</span><span class="p">[</span><span class="nb">Symbol</span><span class="p">.</span><span class="k">for</span><span class="p">(</span><span class="dl">"</span><span class="s2">initial</span><span class="dl">"</span><span class="p">)]({</span>
    <span class="nx">options</span><span class="p">,</span>
    <span class="na">collection</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">BASE_URL</span><span class="p">:</span> <span class="dl">"</span><span class="s2">https://test-api.k6.io/</span><span class="dl">"</span>
    <span class="p">},</span>
    <span class="na">environment</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">USERNAME</span><span class="p">:</span> <span class="dl">"</span><span class="s2">test@example.com</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">PASSWORD</span><span class="p">:</span> <span class="dl">"</span><span class="s2">superCroc2020</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">FIRSTNAME</span><span class="p">:</span> <span class="dl">"</span><span class="s2">John</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">LASTNAME</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Doe</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">EMAIL</span><span class="p">:</span> <span class="dl">"</span><span class="s2">test@example.com</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">ACCESS</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="na">REFRESH</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="na">CROCID</span><span class="p">:</span> <span class="kc">null</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">group</span><span class="p">(</span><span class="dl">"</span><span class="s2">Public APIs</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">postman</span><span class="p">[</span><span class="nx">Request</span><span class="p">]({</span>
            <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">List all public crocodiles</span><span class="dl">"</span><span class="p">,</span>
            <span class="na">id</span><span class="p">:</span> <span class="dl">"</span><span class="s2">3ddd46c4-1618-4883-82ff-1b1e3a5f1091</span><span class="dl">"</span><span class="p">,</span>
            <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
            <span class="na">address</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/public/crocodiles/</span><span class="dl">"</span>
        <span class="p">});</span>

        <span class="nx">postman</span><span class="p">[</span><span class="nx">Request</span><span class="p">]({</span>
            <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Get a single public crocodile</span><span class="dl">"</span><span class="p">,</span>
            <span class="na">id</span><span class="p">:</span> <span class="dl">"</span><span class="s2">9625f17a-b739-4f91-af99-fba1d898953b</span><span class="dl">"</span><span class="p">,</span>
            <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
            <span class="na">address</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/public/crocodiles/1/</span><span class="dl">"</span>
        <span class="p">});</span>
    <span class="p">});</span>

    <span class="c1">// NOTE: The rest of the requests can be accessed</span>
    <span class="c1">// from the repository in step 1</span>
<span class="p">});</span>
</code></pre></div></div> <p>The generated script is a little bit different from normal k6 scripts, since it includes various abstractions to support different Postman functionality, but you can mix them with regular <a href="https://docs.k6.io/docs/http-requests">http requests</a> from k6. Also, there is a <code class="language-plaintext highlighter-rouge">libs</code> directory beside the script that includes shims and libraries needed for the Postman scripts to work correctly.</p> <p><strong>5. Install k6</strong>:</p> <p>k6 supports various platforms, including Windows, Linux, macOS and docker. In order to <a href="https://docs.k6.io/docs/installation">install</a> it, just grab an <a href="https://dl.bintray.com/loadimpact/windows/k6-latest-amd64.msi">Windows installer</a> or a <a href="https://hub.docker.com/r/loadimpact/k6">docker image</a> and run it on your machine. On Linux distributions, you can use <a href="https://docs.k6.io/docs/installation#section-linux-deb-and-rpm-packages">APT or YUM</a>, and on macOS, you can use <a href="https://docs.k6.io/docs/installation#section-mac-brew">Homebrew</a>.</p> <p>NOTE: Regarding installation on Windows, you can also use <a href="https://chocolatey.org/packages/k6">choco k6 package</a>.</p> <p><strong>6. Run k6 with the generated script</strong>:</p> <p>Now that you have your collections converted into a k6 script, you can invoke k6 like this:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>k6 run k6-script.js
</code></pre></div></div> <p>The result of running the script is shown in the following console output:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
          /<span class="se">\ </span>     |‾‾|  /‾‾/  /‾/   
     /<span class="se">\ </span> /  <span class="se">\ </span>    |  |_/  /  / /    
    /  <span class="se">\/</span>    <span class="se">\ </span>   |      |  /  ‾‾<span class="se">\ </span> 
   /          <span class="se">\ </span>  |  |‾<span class="se">\ </span> <span class="se">\ </span>| <span class="o">(</span>_<span class="o">)</span> | 
  / __________ <span class="se">\ </span> |__|  <span class="se">\_</span>_<span class="se">\ \_</span>__/ .io

  execution: <span class="nb">local
     </span>output: -
     script: k6-script.js

    duration: 1m0s, iterations: -
         vus: 100,  max: 100

    <span class="k">done</span> <span class="o">[==========================================================]</span> 1m0s / 1m0s

    █ Public APIs

    █ Registration and authentication

    █ Private APIs

    data_received..............: 8.8 MB 146 kB/s
    data_sent..................: 4.8 MB 80 kB/s
    group_duration.............: <span class="nv">avg</span><span class="o">=</span>753.07ms <span class="nv">min</span><span class="o">=</span>239.15ms <span class="nv">med</span><span class="o">=</span>495ms    <span class="nv">max</span><span class="o">=</span>4.06s    p<span class="o">(</span>90<span class="o">)=</span>1.37s    p<span class="o">(</span>95<span class="o">)=</span>1.73s
    http_req_blocked...........: <span class="nv">avg</span><span class="o">=</span>12.31ms  <span class="nv">min</span><span class="o">=</span>362ns    <span class="nv">med</span><span class="o">=</span>1.52µs   <span class="nv">max</span><span class="o">=</span>3.47s    p<span class="o">(</span>90<span class="o">)=</span>1.83µs   p<span class="o">(</span>95<span class="o">)=</span>1.96µs
    http_req_connecting........: <span class="nv">avg</span><span class="o">=</span>1.95ms   <span class="nv">min</span><span class="o">=</span>0s       <span class="nv">med</span><span class="o">=</span>0s       <span class="nv">max</span><span class="o">=</span>779.59ms p<span class="o">(</span>90<span class="o">)=</span>0s       p<span class="o">(</span>95<span class="o">)=</span>0s
    http_req_duration..........: <span class="nv">avg</span><span class="o">=</span>211.11ms <span class="nv">min</span><span class="o">=</span>104.42ms <span class="nv">med</span><span class="o">=</span>183.12ms <span class="nv">max</span><span class="o">=</span>924.43ms p<span class="o">(</span>90<span class="o">)=</span>304.25ms p<span class="o">(</span>95<span class="o">)=</span>404.24ms
    http_req_receiving.........: <span class="nv">avg</span><span class="o">=</span>1ms      <span class="nv">min</span><span class="o">=</span>41.14µs  <span class="nv">med</span><span class="o">=</span>169.38µs <span class="nv">max</span><span class="o">=</span>130.94ms p<span class="o">(</span>90<span class="o">)=</span>328.31µs p<span class="o">(</span>95<span class="o">)=</span>2.22ms
    http_req_sending...........: <span class="nv">avg</span><span class="o">=</span>205.91µs <span class="nv">min</span><span class="o">=</span>38.06µs  <span class="nv">med</span><span class="o">=</span>163.76µs <span class="nv">max</span><span class="o">=</span>113.06ms p<span class="o">(</span>90<span class="o">)=</span>258.45µs p<span class="o">(</span>95<span class="o">)=</span>302.86µs
    http_req_tls_handshaking...: <span class="nv">avg</span><span class="o">=</span>8.69ms   <span class="nv">min</span><span class="o">=</span>0s       <span class="nv">med</span><span class="o">=</span>0s       <span class="nv">max</span><span class="o">=</span>2.43s    p<span class="o">(</span>90<span class="o">)=</span>0s       p<span class="o">(</span>95<span class="o">)=</span>0s
    http_req_waiting...........: <span class="nv">avg</span><span class="o">=</span>209.9ms  <span class="nv">min</span><span class="o">=</span>104.05ms <span class="nv">med</span><span class="o">=</span>182.22ms <span class="nv">max</span><span class="o">=</span>891.77ms p<span class="o">(</span>90<span class="o">)=</span>301.29ms p<span class="o">(</span>95<span class="o">)=</span>402.41ms
    http_reqs..................: 26363  439.382653/s
    iteration_duration.........: <span class="nv">avg</span><span class="o">=</span>2.28s    <span class="nv">min</span><span class="o">=</span>1.43s    <span class="nv">med</span><span class="o">=</span>2.01s    <span class="nv">max</span><span class="o">=</span>6.55s    p<span class="o">(</span>90<span class="o">)=</span>2.86s    p<span class="o">(</span>95<span class="o">)=</span>3.64s
    iterations.................: 2588   43.133267/s
    vus........................: 100    <span class="nv">min</span><span class="o">=</span>100 <span class="nv">max</span><span class="o">=</span>100
    vus_max....................: 100    <span class="nv">min</span><span class="o">=</span>100 <span class="nv">max</span><span class="o">=</span>100

</code></pre></div></div> <h1 id="remarks-about-using-the-postman-to-k6-converter">Remarks about using the postman-to-k6 converter</h1> <p><strong>1️. Should we base our load tests on the Postman converter and our Postman collections?</strong></p> <p>If you’re using the converter as a way of onboarding, no. If you expect to convert your collection continuously and without doing a lot of manual edits afterwards, yes.</p> <p>We recommend you to use the converter as an easy way to onboard and then rewrite your scripts to idiomatic k6 code, as we believe it to be more maintainable and less likely to degrade over time. If you convert from postman collections continuously, however, and run the script output as-is, it might make sense to keep it as is.</p> <p><strong>2. Is everything available out of the box in the converted script?</strong></p> <p>No. Since k6 uses Goja to run JavaScript, and it is not compatible with browsers’ and Node.js APIs, hence there are some missing functionality. This can be fixed by <a href="https://k6.io/docs/using-k6/modules">importing bundled JavaScript modules</a>. For a list of compatible libraries, please see <a href="https://jslib.k6.io/">jslib.k6.io</a>.</p> <p><strong>3. What adjustments did you make to the script to make it work?</strong></p> <p>First, I removed the pre-script containing <code class="language-plaintext highlighter-rouge">pm.sendRequest</code>, because it is not supported by the converter. Then, I replaced the <code class="language-plaintext highlighter-rouge">jsonData.hasOwnProperty</code> syntax with the equivalent k6 syntax for <a href="https://k6.io/docs/javascript-api/k6-http/response-k6-http">extracting JSON response information</a>: <code class="language-plaintext highlighter-rouge">response.json("selector")</code>.</p> <p><img src="/assets/images/test-api-postman-pre-script.jpg" alt="Test API Postman collection pre-script"/></p> <h2 id="postman-api-vs-k6-api">Postman API vs. k6 API</h2> <p>Here’s a quick comparison of the <a href="https://learning.postman.com/docs/postman/scripts/postman-sandbox-api-reference/">Postman API</a> versus the <a href="https://k6.io/docs/javascript-api">k6 API</a>. To be fair, I have included features from Postman GUI application. Since k6 is scriptable from the start, you have the option to write the logic in JavaScript. Postman also supports javascript to do various tasks, but the focus is on exposing features via a richer set of GUI elements.</p> <table> <thead> <tr> <th>Feature</th> <th>Postman API</th> <th>k6 API</th> </tr> </thead> <tbody> <tr> <td>Importing external libraries</td> <td>Selected libraries</td> <td>Selected libraries plus bundled ones<br/>(non-browser, non-Node.js APIs)</td> </tr> <tr> <td>Making requests</td> <td>✅</td> <td>✅</td> </tr> <tr> <td>Processing response</td> <td>✅</td> <td>✅</td> </tr> <tr> <td>Parametrization</td> <td>✅</td> <td>✅</td> </tr> <tr> <td>REST</td> <td>✅</td> <td>✅</td> </tr> <tr> <td>GraphQL</td> <td>✅</td> <td>✅</td> </tr> <tr> <td>Cookies</td> <td>✅</td> <td>✅</td> </tr> <tr> <td>Proxy</td> <td>✅</td> <td>✅</td> </tr> <tr> <td>SSL</td> <td>✅</td> <td>✅</td> </tr> <tr> <td>OpenAPI/Swagger</td> <td>✅<br/>(import directly)</td> <td>✅<br/>(via k6 generator in openapi-generator)</td> </tr> <tr> <td>Checks</td> <td>✅<br/>(assertions)</td> <td>✅<br/>(Check API)</td> </tr> <tr> <td>Groups</td> <td>✅<br/>(Collections)</td> <td>✅<br/>(Group API)</td> </tr> <tr> <td>HTML parsing</td> <td>✅<br/>(needs library)</td> <td>✅<br/>(internal HTML API)</td> </tr> <tr> <td>File upload</td> <td>✅</td> <td>✅</td> </tr> <tr> <td>Test Lifecycle</td> <td>✅<br/>(only with scripts)</td> <td>✅<br/>(internal)</td> </tr> </tbody> </table> <p>As you saw above, there are many features supported by each API, each to some extent. Some features needs external libraries, some are internal. Both APIs are scriptable in JavaScript, and not everything is supported by both, due to the various browser and Node.js APIs used in the libraries.</p> <p>Yet, there are some features only available on k6, which is partially due to the fact that the Postman is catered for API testing or API functional testing, but k6 is focused more on <a href="https://k6.io/docs/testing-guides/api-load-testing">API load testing</a>.</p> <h3 id="functional-testing-vs-load-testing">Functional testing vs. load testing</h3> <p>Functional testing concerns with giving input to the system (as a black-box) via an API and examining the results, while load testing is basically doing the same thing as functional testing, but with additional <strong>load</strong> on the input to the system.</p> <p>Functional testing provides input on each endpoint, and the returned results are verified in terms of correctness against a set of specifications. In turn, load testing provides a huge amount of load on each endpoint, and rather tries to aggregate the metadata returned by all the responses.</p> <h3 id="load-testing-metrics-for-measuring-performance">Load testing metrics for measuring performance</h3> <p>Concerning the measurements, the metadata will include the time it took for the request to settle and the response to return, which are measure by various <a href="https://k6.io/docs/using-k6/metrics">metrics</a>. For example you can measure the HTTP request duration of all requests and get their minimum, maximum, average, median, 90th and 95th percentiles.</p> <h3 id="passfail-a-test-with-thresholds">Pass/fail a test with thresholds</h3> <p>You also have the option to pass/fail a test if it does/doesn’t reach certain <a href="https://k6.io/docs/using-k6/thresholds">threshold(s)</a>. For example, you can specify that you want the average response time to be less than 500ms. If the average is below that, the test will fail, much like asserts in software testing.</p> <h3 id="filter-results-with-tags">Filter results with tags</h3> <p>Since you’re dealing with lots of different results from different endpoints, your life would be easier if you could filter the results. <a href="https://k6.io/docs/using-k6/tags-and-groups#tags">Tags</a> are supported by k6 to fulfill this requirement.</p> <h3 id="load-testing-websocket-servers">Load testing WebSocket servers</h3> <p>In terms of protocol implementation, <a href="https://k6.io/docs/using-k6/protocols/websockets">WebSocket</a> is one of the features available only in k6, compared to Postman, and you can load test your WebSocket server with it.</p> <h2 id="conclusion">Conclusion</h2> <p>In this article I’ve tried to give a quick introduction to Postman, the postman-to-k6 converter and our k6 load testing tool. All these tools combined can help you turn your API requests in Postman into k6 script in order to load test your API. Many of the Postman features are supported by the postman-to-k6 tool.</p> <p>Our ultimate goal is to streamline the process of onboarding you to our load testing tool, k6. In doing so, we have created a bunch of <a href="https://k6.io/docs/integrations">integrations</a> that can help you start load testing in your infrastructure.</p> </section> <footer class="page__meta"> <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2020-06-05">June 5, 2020</time></p> </footer> <section class="page__share"> <a href="https://twitter.com/intent/tweet?via=mosimoradian&text=Load+Testing+Your+API+with+Postman%20https%3A%2F%2Fmostafa.dev%2Fblog%2Fload-testing-your-api-with-postman" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fmostafa.dev%2Fblog%2Fload-testing-your-api-with-postman" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fmostafa.dev%2Fblog%2Fload-testing-your-api-with-postman" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a> </section> <nav class="pagination"> <a href="/blog/load-testing-your-api-with-swagger-openapi-and-k6" class="pagination--pager" title="Load Testing Your API with Swagger/OpenAPI and k6 ">Previous</a> <a href="/blog/devrel-content-strategies" class="pagination--pager" title="DevRel Content Strategies ">Next</a> </nav> </div> <div class="page__comments"> <h4 class="page__comments-title">Comments</h4> <section id="disqus_thread"></section> </div> </article> <div class="page__related"> <h4 class="page__related-title">You May Also Enjoy</h4> <div class="grid__wrapper"> <div class="grid__item"> <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"> <h2 class="archive__item-title" itemprop="headline"> <a href="/blog/devrel-content-strategies" rel="permalink">DevRel Content Strategies </a> </h2> <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 1 minute read </p> <p class="archive__item-excerpt" itemprop="description">The very first developer relations online meetup of Stockholm was streamed live on Facebook on April 15, 2020. It was also recorded and later published on Yo...</p> </article> </div> <div class="grid__item"> <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"> <h2 class="archive__item-title" itemprop="headline"> <a href="/blog/load-testing-your-api-with-swagger-openapi-and-k6" rel="permalink">Load Testing Your API with Swagger/OpenAPI and k6 </a> </h2> <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 7 minute read </p> <p class="archive__item-excerpt" itemprop="description">Generating k6 scripts from Swagger/OpenAPI specifications has never been easier. Using the newly built k6 generator, you can convert your API specification t...</p> </article> </div> <div class="grid__item"> <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"> <h2 class="archive__item-title" itemprop="headline"> <a href="/blog/microvm-another-level-of-abstraction-for-serverless-computing" rel="permalink">microVM: Another Level of Abstraction for Serverless Computing </a> </h2> <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 4 minute read </p> <p class="archive__item-excerpt" itemprop="description">For years, cloud computing was a way to convince users and business to spend their money hosting their services on servers collocated on cloud data-centers. ...</p> </article> </div> <div class="grid__item"> <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork"> <h2 class="archive__item-title" itemprop="headline"> <a href="/blog/api-backend-security" rel="permalink">API &amp; Backend Security </a> </h2> <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 22 minute read </p> <p class="archive__item-excerpt" itemprop="description">In my previous article about secure code review and penetration testing of Node.js and JavaScript apps, I tried to give the reader an introduction to the old...</p> </article> </div> </div> </div> </div> </div> <div class="search-content"> <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';"> <label class="sr-only" for="search"> Enter your search term... </label> <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..."/> </form> <div id="results" class="results"></div></div> </div> <div id="footer" class="page__footer"> <footer> <div class="page__footer-follow"> <ul class="social-icons"> <li><a href="https://mostafa.dev" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link" aria-hidden="true"></i> Mostafa.DEV</a></li> <li><a href="https://twitter.com/mosimoradian" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li> <li><a href="https://github.com/mostafa" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li> <li><a href="https://instagram.com/mostafa_moradian" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-instagram" aria-hidden="true"></i> Instagram</a></li> <li><a href="https://www.linkedin.com/in/mostafa-moradian" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li> <li><a href="https://www.medium.com/@mostafamoradian" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-medium" aria-hidden="true"></i> Medium</a></li> <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li> </ul> </div> <div class="page__footer-copyright">&copy; 2020 Mostafa's personal blog. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div> </footer> </div> <script src="/assets/js/main.min.js"></script> <script src="https://kit.fontawesome.com/4eee35f757.js"></script> <script src="/assets/js/lunr/lunr.min.js"></script> <script src="/assets/js/lunr/lunr-store.js"></script> <script src="/assets/js/lunr/lunr-en.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-167412694-1"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-167412694-1",{anonymize_ip:!0});</script> <script>var disqus_config=function(){this.page.url="https://mostafa.dev/blog/load-testing-your-api-with-postman",this.page.identifier="/blog/load-testing-your-api-with-postman"};!function(){var t=document,e=t.createElement("script");e.src="https://mostafa-dev.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}();</script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </body> </html>